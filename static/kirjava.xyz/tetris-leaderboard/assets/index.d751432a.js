const ke=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}};ke();const j={};function Oe(e){j.context=e}const Ue=(e,t)=>e===t,Fe=Symbol("solid-track"),ce={equals:Ue};let _e=Ee;const H={},M=1,fe=2,Ie={owned:null,cleanups:null,context:null,owner:null};var x=null;let z=null,b=null,W=null,S=null,E=null,ye=0;function re(e,t){const n=b,s=x,l=e.length===0,o=l?Ie:{owned:null,cleanups:null,context:null,owner:t||s},c=l?e:()=>e(()=>ve(o));x=o,b=null;try{return Se(c,!0)}finally{b=n,x=s}}function B(e,t){t=t?Object.assign({},ce,t):ce;const n={value:e,observers:null,observerSlots:null,pending:H,comparator:t.equals||void 0},s=l=>(typeof l=="function"&&(l=l(n.pending!==H?n.pending:n.value)),we(n,l));return[Be.bind(n),s]}function G(e,t,n){const s=xe(e,t,!1,M);ee(s)}function Ce(e,t,n){_e=qe;const s=xe(e,t,!1,M);s.user=!0,E?E.push(s):ee(s)}function Pe(e,t,n){n=n?Object.assign({},ce,n):ce;const s=xe(e,t,!0,0);return s.pending=H,s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,ee(s),Be.bind(s)}function Re(e){if(W)return e();let t;const n=W=[];try{t=e()}finally{W=null}return Se(()=>{for(let s=0;s<n.length;s+=1){const l=n[s];if(l.pending!==H){const o=l.pending;l.pending=H,we(l,o)}}},!1),t}function me(e){let t,n=b;return b=null,t=e(),b=n,t}function Ve(e){return x===null||(x.cleanups===null?x.cleanups=[e]:x.cleanups.push(e)),e}function Be(){const e=z;if(this.sources&&(this.state||e)){const t=S;S=null,this.state===M||e?ee(this):ue(this),S=t}if(b){const t=this.observers?this.observers.length:0;b.sources?(b.sources.push(this),b.sourceSlots.push(t)):(b.sources=[this],b.sourceSlots=[t]),this.observers?(this.observers.push(b),this.observerSlots.push(b.sources.length-1)):(this.observers=[b],this.observerSlots=[b.sources.length-1])}return this.value}function we(e,t,n){if(W)return e.pending===H&&W.push(e),e.pending=t,t;if(e.comparator&&e.comparator(e.value,t))return t;let s=!1;return e.value=t,e.observers&&e.observers.length&&Se(()=>{for(let l=0;l<e.observers.length;l+=1){const o=e.observers[l];s&&z.disposed.has(o),(s&&!o.tState||!s&&!o.state)&&(o.pure?S.push(o):E.push(o),o.observers&&Le(o)),s||(o.state=M)}if(S.length>1e6)throw S=[],new Error},!1),t}function ee(e){if(!e.fn)return;ve(e);const t=x,n=b,s=ye;b=x=e,je(e,e.value,s),b=n,x=t}function je(e,t,n){let s;try{s=e.fn(t)}catch(l){Te(l)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?we(e,s):e.value=s,e.updatedAt=n)}function xe(e,t,n,s=M,l){const o={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:x,context:null,pure:n};return x===null||x!==Ie&&(x.owned?x.owned.push(o):x.owned=[o]),o}function Y(e){const t=z;if(e.state===0||t)return;if(e.state===fe||t)return ue(e);if(e.suspense&&me(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ye);)(e.state||t)&&n.push(e);for(let s=n.length-1;s>=0;s--)if(e=n[s],e.state===M||t)ee(e);else if(e.state===fe||t){const l=S;S=null,ue(e,n[0]),S=l}}function Se(e,t){if(S)return e();let n=!1;t||(S=[]),E?n=!0:E=[],ye++;try{const s=e();return Me(n),s}catch(s){S||(E=null),Te(s)}}function Me(e){S&&(Ee(S),S=null),!e&&(E.length?Re(()=>{_e(E),E=null}):E=null)}function Ee(e){for(let t=0;t<e.length;t++)Y(e[t])}function qe(e){let t,n=0;for(t=0;t<e.length;t++){const l=e[t];l.user?e[n++]=l:Y(l)}j.context&&Oe();const s=e.length;for(t=0;t<n;t++)Y(e[t]);for(t=s;t<e.length;t++)Y(e[t])}function ue(e,t){const n=z;e.state=0;for(let s=0;s<e.sources.length;s+=1){const l=e.sources[s];l.sources&&(l.state===M||n?l!==t&&Y(l):(l.state===fe||n)&&ue(l,t))}}function Le(e){const t=z;for(let n=0;n<e.observers.length;n+=1){const s=e.observers[n];(!s.state||t)&&(s.state=fe,s.pure?S.push(s):E.push(s),s.observers&&Le(s))}}function ve(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),l=n.observers;if(l&&l.length){const o=l.pop(),c=n.observerSlots.pop();s<l.length&&(o.sourceSlots[c]=s,l[s]=o,n.observerSlots[s]=c)}}if(e.owned){for(t=0;t<e.owned.length;t++)ve(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Te(e){throw e}const De=Symbol("fallback");function $e(e){for(let t=0;t<e.length;t++)e[t]()}function Ze(e,t,n={}){let s=[],l=[],o=[],c=0,i=t.length>1?[]:null;return Ve(()=>$e(o)),()=>{let u=e()||[],f,r;return u[Fe],me(()=>{let h=u.length,$,O,I,V,L,A,w,_,T;if(h===0)c!==0&&($e(o),o=[],s=[],l=[],c=0,i&&(i=[])),n.fallback&&(s=[De],l[0]=re(ae=>(o[0]=ae,n.fallback())),c=1);else if(c===0){for(l=new Array(h),r=0;r<h;r++)s[r]=u[r],l[r]=re(y);c=h}else{for(I=new Array(h),V=new Array(h),i&&(L=new Array(h)),A=0,w=Math.min(c,h);A<w&&s[A]===u[A];A++);for(w=c-1,_=h-1;w>=A&&_>=A&&s[w]===u[_];w--,_--)I[_]=l[w],V[_]=o[w],i&&(L[_]=i[w]);for($=new Map,O=new Array(_+1),r=_;r>=A;r--)T=u[r],f=$.get(T),O[r]=f===void 0?-1:f,$.set(T,r);for(f=A;f<=w;f++)T=s[f],r=$.get(T),r!==void 0&&r!==-1?(I[r]=l[f],V[r]=o[f],i&&(L[r]=i[f]),r=O[r],$.set(T,r)):o[f]();for(r=A;r<h;r++)r in I?(l[r]=I[r],o[r]=V[r],i&&(i[r]=L[r],i[r](r))):l[r]=re(y);l=l.slice(0,c=h),s=u.slice(0)}return l});function y(h){if(o[r]=h,i){const[$,O]=B(r);return i[r]=O,t(u[r],$)}return t(u[r])}}}function F(e,t){return me(()=>e(t||{}))}function Q(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Pe(Ze(()=>e.each,e.children,t||void 0))}function Ke(e,t){return Pe(e,void 0,t?void 0:{equals:t})}function Ge(e,t,n){let s=n.length,l=t.length,o=s,c=0,i=0,u=t[l-1].nextSibling,f=null;for(;c<l||i<o;){if(t[c]===n[i]){c++,i++;continue}for(;t[l-1]===n[o-1];)l--,o--;if(l===c){const r=o<s?i?n[i-1].nextSibling:n[o-i]:u;for(;i<o;)e.insertBefore(n[i++],r)}else if(o===i)for(;c<l;)(!f||!f.has(t[c]))&&t[c].remove(),c++;else if(t[c]===n[o-1]&&n[i]===t[l-1]){const r=t[--l].nextSibling;e.insertBefore(n[i++],t[c++].nextSibling),e.insertBefore(n[--o],r),t[l]=n[o]}else{if(!f){f=new Map;let y=i;for(;y<o;)f.set(n[y],y++)}const r=f.get(t[c]);if(r!=null)if(i<r&&r<o){let y=c,h=1,$;for(;++y<l&&y<o&&!(($=f.get(t[y]))==null||$!==r+h);)h++;if(h>r-i){const O=t[c];for(;i<r;)e.insertBefore(n[i++],O)}else e.replaceChild(n[i++],t[c++])}else c++;else t[c++].remove()}}}function He(e,t,n){let s;return re(l=>{s=l,t===document?e():N(t,e(),t.firstChild?null:void 0,n)}),()=>{s(),t.textContent=""}}function q(e,t,n){const s=document.createElement("template");s.innerHTML=e;let l=s.content.firstChild;return n&&(l=l.firstChild),l}function Ae(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function N(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return de(e,t,s,n);G(l=>de(e,t(),l,n),s)}function de(e,t,n,s,l){for(j.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,c=s!==void 0;if(e=c&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(j.context)return n;if(o==="number"&&(t=t.toString()),c){let i=n[0];i&&i.nodeType===3?i.data=t:i=document.createTextNode(t),n=K(e,n,s,i)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(j.context)return n;n=K(e,n,s)}else{if(o==="function")return G(()=>{let i=t();for(;typeof i=="function";)i=i();n=de(e,i,n,s)}),()=>n;if(Array.isArray(t)){const i=[],u=n&&Array.isArray(n);if(be(i,t,n,l))return G(()=>n=de(e,i,n,s,!0)),()=>n;if(j.context){for(let f=0;f<i.length;f++)if(i[f].parentNode)return n=i}if(i.length===0){if(n=K(e,n,s),c)return n}else u?n.length===0?Ne(e,i,s):Ge(e,n,i):(n&&K(e),Ne(e,i));n=i}else if(t instanceof Node){if(j.context&&t.parentNode)return n=c?[t]:t;if(Array.isArray(n)){if(c)return n=K(e,n,s,t);K(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function be(e,t,n,s){let l=!1;for(let o=0,c=t.length;o<c;o++){let i=t[o],u=n&&n[o];if(i instanceof Node)e.push(i);else if(!(i==null||i===!0||i===!1))if(Array.isArray(i))l=be(e,i,u)||l;else if(typeof i=="function")if(s){for(;typeof i=="function";)i=i();l=be(e,Array.isArray(i)?i:[i],u)||l}else e.push(i),l=!0;else{const f=String(i);u&&u.nodeType===3&&u.data===f?e.push(u):e.push(document.createTextNode(f))}}return l}function Ne(e,t,n){for(let s=0,l=t.length;s<l;s++)e.insertBefore(t[s],n)}function K(e,t,n,s){if(n===void 0)return e.textContent="";const l=s||document.createTextNode("");if(t.length){let o=!1;for(let c=t.length-1;c>=0;c--){const i=t[c];if(l!==i){const u=i.parentNode===e;!o&&!c?u?e.replaceChild(l,i):e.insertBefore(l,n):u&&i.remove()}else o=!0}}else e.insertBefore(l,n);return[l]}const Xe=q('<div class="multi-select"></div>'),Je=q('<div class="filter-option"><label><input type="checkbox"></label></div>'),Qe=q('<div><div class="menu"><div class="board"><select></select><div class="links"><a href="https://docs.google.com/spreadsheets/d/1ZBxkZEsfwDsUpyire4Xb16er36Covk7nhR8BN_LPodI/edit">google doc</a> | <a href="https://github.com/kirjavascript/tetris-leaderboard">source code</a></div><label for="vid-pb" class="vid-pb">Sort by Vid PB<input type="checkbox" id="vid-pb"></label></div><div class="filters"></div></div><table><thead><tr></tr></thead><tbody></tbody></table></div>'),We=q("<option></option>"),Ye=q("<th></th>"),ze=q("<tr></tr>"),et=q("<td></td>"),oe=[["NTSC",1078039113],["NTSC19",907672507],["NTSC29",388848410],["NTSC29 Lines",1955350822],["NTSC Level",2046616260],["PAL",1899465071],["PAL19",1148941034]];function tt(){const[e,t]=B([]),[n,s]=B([]),[l,o]=B([]),[c,i]=B([]),[u,f]=B({}),y=[...new URLSearchParams(window.location.search).entries()].reduce((a,[v,g])=>(a[v]=g.split("|"),a),{}),h=!!Object.keys(y).length,[$,O]=B(y.board&&oe.find(([a])=>a===y.board.join(""))||oe[0]),[I,V]=B(y.playstyle||[]),[L,A]=B(y.platform||(h?[]:["Console"])),[w,_]=B(y.proof||(h?[]:["Video"])),[T,ae]=B(y.sortBy?.[0]==="VidPB");function te(a){return String(a).replace(/Video\+/i,"Video")}function he(a,v){return a.rows.map(g=>te(g[v])).filter((g,C,R)=>R.indexOf(g)===C)}Ce(()=>{const v="https://docs.google.com/spreadsheets/d/1ZBxkZEsfwDsUpyire4Xb16er36Covk7nhR8BN_LPodI/gviz/tq?",g="user-data",C=encodeURIComponent("Select *"),R=`${v}&sheet=${g}&tq=${C}&gid=${$()[1]}`;fetch(R).then(U=>U.text()).then(U=>{const{table:m}=JSON.parse(U.slice(47,-2));m.rows=m.rows.map(d=>d.c.map(P=>P?.v));const D=m.cols.findIndex(d=>/style/i.test(d.label)),Z=m.cols.findIndex(d=>/platform/i.test(d.label)),ne=m.cols.findIndex(d=>/proof/i.test(d.label)),se=m.cols.findIndex(d=>/vid pb/i.test(d.label));f({playstyleIndex:D,platformIndex:Z,proofIndex:ne,vidPBIndex:se}),t(m);const le=he(m,D);s(le),V(I().filter(d=>le.includes(d)));const ie=he(m,Z);o(ie),A(L().filter(d=>ie.includes(d)));const p=he(m,ne);i(p),_(w().filter(d=>p.includes(d)))}).catch(console.error)}),Ce(()=>{const a=[["board",[$()[0]]],["platform",L()],["proof",w()],["playstyle",I()],["sortBy",T()&&["VidPB"]]].filter(([,v])=>v&&v.length).map(([v,g])=>`${v}=${g.map(encodeURIComponent).join("|")}`).join("&");window.history.replaceState(null,"","?"+a)});function pe(a){function v(g){a.selected.includes(g)?a.onSelect(a.selected.filter(C=>C!==g)):a.onSelect(a.selected.concat([g]))}return(()=>{const g=Xe.cloneNode(!0);return N(g,F(Q,{get each(){return a.options},children:C=>(()=>{const R=Je.cloneNode(!0),U=R.firstChild,m=U.firstChild;return Ae(U,"for",C),N(U,C,m),m.addEventListener("change",D=>v(C)),Ae(m,"id",C),G(()=>m.checked=a.selected.includes(C)),R})()})),g})()}return(()=>{const a=Qe.cloneNode(!0),v=a.firstChild,g=v.firstChild,C=g.firstChild,R=C.nextSibling,U=R.nextSibling,m=U.firstChild,D=m.nextSibling,Z=g.nextSibling,ne=v.nextSibling,se=ne.firstChild,le=se.firstChild,ie=se.nextSibling;return C.addEventListener("change",p=>O(oe[p.target.selectedIndex])),N(C,F(Q,{each:oe,children:([p,d])=>(()=>{const P=We.cloneNode(!0);return P.value=d,N(P,p),G(()=>P.selected=d===$()[1]),P})()})),D.addEventListener("change",p=>{ae(p.target.checked)}),N(Z,F(pe,{get options(){return l()},onSelect:p=>A(p),get selected(){return L()}}),null),N(Z,F(pe,{get options(){return c()},onSelect:p=>_(p),get selected(){return w()}}),null),N(Z,F(pe,{get options(){return n()},onSelect:p=>V(p),get selected(){return I()}}),null),N(le,F(Q,{get each(){return e().cols?.slice(0,-1)},children:p=>(()=>{const d=Ye.cloneNode(!0);return N(d,()=>p.label),d})()})),N(ie,F(Q,{get each(){return(()=>{const{playstyleIndex:p,platformIndex:d,proofIndex:P,vidPBIndex:X}=u(),J=e().rows?.filter(k=>(!I().length||I().includes(te(k[p])))&&(!L().length||L().includes(te(k[d])))&&(!w().length||w().includes(te(k[P]))));return J&&T()?J.filter(k=>k[X]).sort((k,ge)=>ge[X]-k[X]):J})()},children:(p,d)=>(()=>{const P=ze.cloneNode(!0);return N(P,F(Q,{get each(){return p.slice(0,-1)},children:(X,J)=>(()=>{const k=et.cloneNode(!0);return N(k,(()=>{const ge=Ke(()=>J()===0,!0);return()=>ge()?d()+1:X})()),k})()})),P})()})),G(()=>D.checked=T()),a})()}He(()=>F(tt,{}),document.body.appendChild(document.createElement("div")));
